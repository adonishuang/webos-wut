webpackJsonp([1],{EikP:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("7+uW"),i={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var o=a("VU/8")({name:"App"},i,!1,function(e){a("ln9d")},null,null).exports,s=a("/ocq"),r=a("mvHQ"),n=a.n(r),c=a("mtWM"),d={addr:"http://localhost:9000",dbtype:"mysql"},u=a("VU/8")(d,null,!1,null,null,null).exports,m={data:function(){return{searchTableName:"",tableNames:[],state:"",requestData:{},tableimgsrc:"",addtableVisible:!1,addcolVisible:!1,submittableVisible:!1,nowtable:"",ziduanList:[],newtable:{},colform:{},pri_checked:!1,isnull_checked:!1,operate:"",editIndex:0}},methods:{querySearch:function(e,t){for(var a=[],l=0;l<this.tableNames.length;l++){var i={};i.value=this.tableNames[l].TABLE_NAME.toString(),a.push(i)}console.log(1,a),t(e?a.filter(this.createFilter(e)):a)},createFilter:function(e){return function(t){return 0===t.value.toLowerCase().indexOf(e.toLowerCase())}},selectTable:function(e){this.$router.push({path:"/table",query:{tableName:e.TABLE_NAME}})},getTableList:function(){var e=this;this.requestData={databaseType:u.dbtype,operate:"find",sql:"select TABLE_NAME,TABLE_COMMENT from information_schema.TABLES where TABLE_SCHEMA='gateway'"},Object(c.a)({url:u.addr+"/request",method:"POST",dataType:"json",data:this.requestData}).then(function(t){e.tableNames=JSON.parse(n()(t.data.data)),e.tableNames=e.tableNames.filter(function(e){return"metadata_table"!==e.TABLE_NAME})})},addTable:function(){this.addtableVisible=!0},addCol:function(){this.isnull_checked=!1,this.pri_checked=!1,this.colform=[],this.addcolVisible=!0,this.operate="add"},addColSubmit:function(){"add"==this.operate?this.ziduanList.push({name:this.colform.name,type:this.colform.type,col_length:this.colform.col_length,isnull:this.isnull_checked?"√":"",key:this.pri_checked?"PRI":"",description:this.colform.description}):"edit"==this.operate&&(this.ziduanList[this.editIndex]=this.colform),this.addcolVisible=!1,this.colform={},this.isnull_checked=!1,this.pri_checked=!1},addTableSubmit:function(){this.submittableVisible=!0},addTableSubmit2:function(){for(var e=this,t="CREATE TABLE `gateway`.`"+this.newtable.name+"`  (",a="(",l=0;l<this.ziduanList.length;l++)t=t+" `"+this.ziduanList[l].name+"` "+this.ziduanList[l].type,"char"!=this.ziduanList[l].type&&"varchar"!=this.ziduanList[l].type||(t=t+"("+this.ziduanList[l].col_length+")"),""==this.ziduanList[l].isnull?t+=" NULL ":t+=" NOT NULL ",""!=this.ziduanList[l].description?t=t+"COMMENT '"+this.ziduanList[l].description+"',":t+=",","PRI"==this.ziduanList[l].key&&(a=a+"`"+this.ziduanList[l].name+"`,");"("==a?(t=t.slice(0,-1),t+=")"):(a=a.slice(0,-1),t=t+"PRIMARY KEY "+(a+=")")+")"),""==this.newtable.description?t+=";":t=t+" COMMENT = '"+this.newtable.description+"';",console.log(t),this.requestData={databaseType:u.dbtype,operate:"",sql:t},Object(c.a)({url:u.addr+"/request",method:"POST",dataType:"json",data:this.requestData}).then(function(t){var a;a="insert into metadata_table (metadata_name,metadata_cnname,metadata_subarea,metadata_owner,metadata_tip) values ('"+e.newtable.name+"','"+e.newtable.cnname+"','"+e.newtable.type+"','"+e.newtable.owner+"','"+e.newtable.tip+"'); ",e.requestData={databaseType:u.dbtype,operate:"",sql:a},Object(c.a)({url:u.addr+"/request",method:"POST",dataType:"json",data:e.requestData}).then(function(t){e.ziduanList=[],e.colform={},e.isnull_checked=!1,e.pri_checked=!1,e.submittableVisible=!1,e.addtableVisible=!1,e.getTableList(),e.$message({message:"已成功创建数据表！",type:"success"})}).catch(function(t){e.$message.error("请检查您的输入是否有误！")})}).catch(function(t){e.$message.error("请检查您的输入是否有误！")})},searchTable:function(){var e=this;""!=this.searchTableName?(this.requestData={databaseType:u.dbtype,operate:"find",sql:"select TABLE_NAME,TABLE_COMMENT from information_schema.TABLES where TABLE_SCHEMA='gateway' and TABLE_NAME='"+this.searchTableName+"'"},Object(c.a)({url:u.addr+"/request",method:"POST",dataType:"json",data:this.requestData}).then(function(t){e.tableNames=JSON.parse(n()(t.data.data))})):this.getTableList()},deleteCol:function(e,t){var a=this;this.$confirm("此操作将永久删除该字段, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.ziduanList.splice(e,1),a.$message({message:"删除成功！",type:"success"})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},editCol:function(e,t){this.colform=this.ziduanList[e],console.log(this.colform),"√"==this.colform.isnull&&(this.isnull_checked=!0),"PRI"==this.colform.key&&(this.pri_checked=!0),this.addcolVisible=!0,this.operate="edit",this.editIndex=e}},created:function(){this.getTableList()}},h={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticClass:"zuiwaiceng"},[a("el-header",{staticClass:"tou"},[a("div",{staticClass:"page-header"},[a("el-dropdown",{staticStyle:{float:"right"}},[a("span",{staticClass:"el-dropdown-link",staticStyle:{float:"right","font-size":"15px",color:"white","margin-right":"25px","margin-top":"18px"}},[a("i",{staticClass:"el-icon-arrow-down el-icon--left",staticStyle:{float:"right",color:"white","margin-right":"5px","margin-top":"3px"}}),e._v("超级管理员\n\t\t\t\t")]),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{icon:"el-icon-user"}},[e._v("切换账号")]),e._v(" "),a("el-dropdown-item",{attrs:{icon:"el-icon-circle-close"}},[e._v("退出登录")])],1)],1)],1)]),e._v(" "),a("el-main",{staticStyle:{width:"100%","overflow-x":"hidden"}},[a("div",[e._v("\n\t\t\t数据表名称\n\t\t\t"),a("el-autocomplete",{staticClass:"inline-input",attrs:{"fetch-suggestions":e.querySearch,placeholder:"请输入数据表名称"},on:{select:e.handleSelect},model:{value:e.searchTableName,callback:function(t){e.searchTableName=t},expression:"searchTableName"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"15px"},attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(t){return e.searchTable()}}},[e._v(" 搜 索\n\t\t\t")]),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.addTable()}}},[e._v(" 新 建")])],1),e._v(" "),a("div",{staticClass:"tableCards"},e._l(e.tableNames,function(t){return a("el-card",{key:t,staticClass:"box-card tableCard"},[a("div",{staticClass:"clearfix",staticStyle:{width:"100%",height:"50px"},attrs:{slot:"header"},slot:"header"},[a("span",{staticClass:"tableName",attrs:{title:t.TABLE_NAME}},[a("i",{staticClass:"el-icon-document"}),e._v(" "+e._s(t.TABLE_NAME))]),e._v(" "),a("el-button",{staticStyle:{float:"right"},attrs:{type:"text"},on:{click:function(a){return e.selectTable(t)}}},[a("i",{staticClass:"el-icon-view"}),e._v(" 详 情")])],1),e._v(" "),a("div",{staticClass:"tableName"},[a("i",{staticClass:"el-icon-chat-dot-square"}),e._v(" "),a("p",[e._v(e._s(t.TABLE_COMMENT))])])])}),1),e._v(" "),a("el-dialog",{attrs:{title:"新建数据表",visible:e.addtableVisible,width:"60%"},on:{"update:visible":function(t){e.addtableVisible=t}}},[a("el-table",{attrs:{data:e.ziduanList,height:"250px",border:""}},[a("el-table-column",{attrs:{prop:"name",label:"字段名称",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"description",label:"描述",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"type",label:"属性"}}),e._v(" "),a("el-table-column",{attrs:{prop:"isnull",label:"非空"}}),e._v(" "),a("el-table-column",{attrs:{prop:"key",label:"主键"}}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.editCol(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.deleteCol(t.$index,t.row)}}},[e._v("删除\n\t\t\t\t\t\t")])]}}])})],1),e._v(" "),a("el-button",{staticStyle:{"margin-top":"15px"},attrs:{type:"primary"},on:{click:function(t){return e.addCol()}}},[a("i",{staticClass:"el-icon-plus"}),e._v(" 新建字段\n\t\t\t")]),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addtableVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addTableSubmit()}}},[a("i",{staticClass:"el-icon-check"}),e._v(" 提 交")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"新建字段",visible:e.addcolVisible},on:{"update:visible":function(t){e.addcolVisible=t}}},[a("el-form",{attrs:{model:e.colform}},[a("el-form-item",{attrs:{label:"字段名称","label-width":e.formLabelWidth,required:""}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.colform.name,callback:function(t){e.$set(e.colform,"name",t)},expression:"colform.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"属性","label-width":e.formLabelWidth,required:""}},[a("el-select",{attrs:{placeholder:"请选择属性"},model:{value:e.colform.type,callback:function(t){e.$set(e.colform,"type",t)},expression:"colform.type"}},[a("el-option",{attrs:{label:"int",value:"int"}}),e._v(" "),a("el-option",{attrs:{label:"float",value:"float"}}),e._v(" "),a("el-option",{attrs:{label:"double",value:"double"}}),e._v(" "),a("el-option",{attrs:{label:"char",value:"char"}}),e._v(" "),a("el-option",{attrs:{label:"varchar",value:"varchar"}}),e._v(" "),a("el-option",{attrs:{label:"date",value:"date"}}),e._v(" "),a("el-option",{attrs:{label:"time",value:"time"}}),e._v(" "),a("el-option",{attrs:{label:"datetime",value:"datetime"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"长度","label-width":e.formLabelWidth,required:""}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"若类型为char或varchar则必填"},model:{value:e.colform.col_length,callback:function(t){e.$set(e.colform,"col_length",t)},expression:"colform.col_length"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"描述","label-width":e.formLabelWidth,required:""}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.colform.description,callback:function(t){e.$set(e.colform,"description",t)},expression:"colform.description"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"选项","label-width":e.formLabelWidth}},[a("el-checkbox",{model:{value:e.pri_checked,callback:function(t){e.pri_checked=t},expression:"pri_checked"}},[e._v("主键")]),e._v(" "),a("el-checkbox",{model:{value:e.isnull_checked,callback:function(t){e.isnull_checked=t},expression:"isnull_checked"}},[e._v("非空")])],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addcolVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addColSubmit()}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"新建数据表",visible:e.submittableVisible},on:{"update:visible":function(t){e.submittableVisible=t}}},[a("el-form",{attrs:{model:e.newtable}},[a("el-form-item",{attrs:{label:"数据表名称","label-width":e.formLabelWidth,required:""}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.newtable.name,callback:function(t){e.$set(e.newtable,"name",t)},expression:"newtable.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"中文名称","label-width":e.formLabelWidth,required:""}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.newtable.cnname,callback:function(t){e.$set(e.newtable,"cnname",t)},expression:"newtable.cnname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"分类","label-width":e.formLabelWidth,required:""}},[a("el-select",{attrs:{placeholder:"请选择类型"},model:{value:e.newtable.type,callback:function(t){e.$set(e.newtable,"type",t)},expression:"newtable.type"}},[a("el-option",{attrs:{label:"产品",value:"产品"}}),e._v(" "),a("el-option",{attrs:{label:"网关",value:"网关"}}),e._v(" "),a("el-option",{attrs:{label:"人员",value:"人员"}}),e._v(" "),a("el-option",{attrs:{label:"企业",value:"企业"}}),e._v(" "),a("el-option",{attrs:{label:"其他",value:"其他"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"负责人","label-width":e.formLabelWidth,required:""}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.newtable.owner,callback:function(t){e.$set(e.newtable,"owner",t)},expression:"newtable.owner"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"描述","label-width":e.formLabelWidth,required:""}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.newtable.description,callback:function(t){e.$set(e.newtable,"description",t)},expression:"newtable.description"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"注意事项","label-width":e.formLabelWidth,required:""}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.newtable.tip,callback:function(t){e.$set(e.newtable,"tip",t)},expression:"newtable.tip"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.submittableVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addTableSubmit2()}}},[e._v("确 定")])],1)],1)],1)],1)},staticRenderFns:[]};var b=a("VU/8")(m,h,!1,function(e){a("EikP")},null,null).exports,p={data:function(){return{activeName:"first",tableName:"",requestData:{},requestData2:{},nowtable:"",tabPosition:"left",ziduanList:[],yewuList:[],pri_checked:!1,isnull_checked:!1,addcolVisible:!1,editcolVisible:!1,edityewuVisible:!1,colform:[],yewuform:{},editindex:0}},methods:{handleClick:function(e,t){console.log(e.name,t),this.activeName=e.name},goback:function(){this.$router.back()},addCol:function(){this.colform=[],this.pri_checked=!1,this.isnull_checked=!1,this.addcolVisible=!0},addColSubmit:function(){var e=this,t="alter table "+this.tableName+" add "+this.colform.name+" "+this.colform.type;if("char"!=this.colform.type&&"varchar"!=this.colform.type||(t=t+"("+this.colform.col_length+")"),1==this.isnull_checked?t+=" not null":t+=" null",""!=this.colform.description&&(t=t+" COMMENT '"+this.colform.description+"'"),1==this.pri_checked){t+=",";for(var a="(`"+this.colform.name+"`",l=0;l<this.ziduanList.length;l++)"PRI"==this.ziduanList[l].COLUMN_KEY&&(a=a+",`"+this.ziduanList[l].COLUMN_NAME+"`");a!="('"+this.colform.name+"'"&&(t+="DROP PRIMARY KEY,"),t=t+"ADD PRIMARY KEY "+(a+=")")+" USING BTREE;"}else t+=";";console.log(t),this.requestData={databaseType:u.dbtype,operate:"",sql:t},Object(c.a)({url:u.addr+"/request",method:"POST",dataType:"json",data:this.requestData}).then(function(t){e.getziduanList(),e.addcolVisible=!1,e.$message({message:"创建成功！",type:"success"})}).catch(function(t){e.$message.error("请检查您的输入是否有误！")})},getyewuList:function(){var e=this;this.requestData={databaseType:u.dbtype,operate:"find",sql:"select * from metadata_table where metadata_name='"+this.tableName+"'"},Object(c.a)({url:u.addr+"/request",method:"POST",dataType:"json",data:this.requestData}).then(function(t){null!=t.data.data&&(e.yewuList=JSON.parse(n()(t.data.data[0])))})},getziduanList:function(){var e=this;this.requestData={databaseType:u.dbtype,operate:"find",sql:"select * from information_schema.COLUMNS where TABLE_SCHEMA='gateway' and TABLE_NAME='"+this.tableName+"'"},Object(c.a)({url:u.addr+"/request",method:"POST",dataType:"json",data:this.requestData}).then(function(t){e.ziduanList=JSON.parse(n()(t.data.data))})},getnowtable:function(){var e=this;this.tableName=this.$route.query.tableName,console.log(this.tableName),this.requestData={databaseType:u.dbtype,operate:"find",sql:"select * from information_schema.TABLES where TABLE_SCHEMA='gateway' and TABLE_NAME='"+this.tableName+"'"},Object(c.a)({url:u.addr+"/request",method:"POST",dataType:"json",data:this.requestData}).then(function(t){e.nowtable=JSON.parse(n()(t.data.data[0])),console.log(e.nowtable)})},deleteCol:function(e,t){var a=this;this.$confirm("此操作将永久删除该字段, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.requestData={databaseType:u.dbtype,operate:"",sql:"alter table "+a.tableName+" drop COLUMN "+t.COLUMN_NAME},Object(c.a)({url:u.addr+"/request",method:"POST",dataType:"json",data:a.requestData}).then(function(e){a.getziduanList(),a.dialogFormVisible=!1,a.$message({message:"删除成功！",type:"success"})})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},editCol:function(e,t){this.editindex=e,this.colform.oldname=t.COLUMN_NAME,this.$set(this.colform,"name",t.COLUMN_NAME),this.$set(this.colform,"type",t.DATA_TYPE),this.$set(this.colform,"col_length",t.CHARACTER_MAXIMUM_LENGTH),this.$set(this.colform,"description",t.COLUMN_COMMENT),"PRI"==t.COLUMN_KEY?this.pri_checked=!0:this.pri_checked=!1,"NO"==t.IS_NULLABLE?this.isnull_checked=!0:this.isnull_checked=!1,this.editcolVisible=!0},editColSubmit:function(){var e=this,t="alter table "+this.tableName+" CHANGE COLUMN `"+this.colform.oldname+"` "+this.colform.name+" "+this.colform.type;if("char"!=this.colform.type&&"varchar"!=this.colform.type||(t=t+"("+this.colform.col_length+")"),1==this.isnull_checked?t+=" not null":t+=" null",""!=this.colform.description&&(t=t+" COMMENT '"+this.colform.description+"'"),1==this.pri_checked){t+=",";for(var a="(`"+this.colform.name+"`",l=0,i=0;i<this.ziduanList.length;i++)"PRI"==this.ziduanList[i].COLUMN_KEY&&(l=1,this.ziduanList[i].COLUMN_NAME!=this.colform.name&&(a=a+",`"+this.ziduanList[i].COLUMN_NAME+"`"));1==l&&(t+="DROP PRIMARY KEY,"),t=t+"ADD PRIMARY KEY "+(a+=")")+" USING BTREE;"}else{this.ziduanList[this.editindex].COLUMN_KEY="",t+=",DROP PRIMARY KEY";for(a="(",l=0,i=0;i<this.ziduanList.length;i++)"PRI"==this.ziduanList[i].COLUMN_KEY&&(a=a+"`"+this.ziduanList[i].COLUMN_NAME+"`,",l=1);a=a.slice(0,a.length-1),a+=")",1==l?t=t+",ADD PRIMARY KEY "+a+" USING BTREE;":t+=";"}console.log(t),this.requestData={databaseType:u.dbtype,operate:"",sql:t},Object(c.a)({url:u.addr+"/request",method:"POST",dataType:"json",data:this.requestData}).then(function(t){e.getziduanList(),e.dialogFormVisible=!1,e.$message({message:"编辑成功！",type:"success"}),e.editcolVisible=!1,e.colform=[],e.pri_checked=!1,e.isnull_checked=!1}).catch(function(t){e.$message.error("请检查您的输入是否有误！")})},editYewu:function(){this.yewuform.oldname=this.nowtable.TABLE_NAME,this.$set(this.yewuform,"name",this.nowtable.TABLE_NAME),this.$set(this.yewuform,"cnname",this.yewuList.metadata_cnname),this.$set(this.yewuform,"type",this.yewuList.metadata_subarea),this.$set(this.yewuform,"owner",this.yewuList.metadata_owner),this.$set(this.yewuform,"description",this.nowtable.TABLE_COMMENT),this.$set(this.yewuform,"tip",this.yewuList.metadata_tip),this.edityewuVisible=!0},editYewuSubmit:function(){var e,t,a=this,l="insert",i="";0!=this.yewuList.length&&(l="update"),i="insert"==l?"insert into metadata_table (metadata_name,metadata_cnname,metadata_subarea,metadata_owner,metadata_tip) values ('"+this.yewuform.name+"','"+this.yewuform.cnname+"','"+this.yewuform.type+"','"+this.yewuform.owner+"','"+this.yewuform.tip+"'); ":"update metadata_table set metadata_subarea='"+this.yewuform.type+"',metadata_owner='"+this.yewuform.owner+"',metadata_tip='"+this.yewuform.tip+"',metadata_cnname='"+this.yewuform.cnname+"' where metadata_name='"+this.yewuform.oldname+"'; ",t="ALTER TABLE "+this.yewuform.oldname+" RENAME TO "+this.yewuform.name+";",e="alter table "+this.yewuform.oldname+" comment '"+this.yewuform.description+"'; ",this.requestData={databaseType:u.dbtype,operate:"",sql:i},console.log(this.requestData.sql),Object(c.a)({url:u.addr+"/request",method:"POST",dataType:"json",data:this.requestData}).then(function(l){a.requestData={databaseType:u.dbtype,operate:"",sql:e},console.log(a.requestData.sql),Object(c.a)({url:u.addr+"/request",method:"POST",dataType:"json",data:a.requestData}).then(function(e){a.requestData={databaseType:u.dbtype,operate:"",sql:t},console.log(a.requestData.sql),Object(c.a)({url:u.addr+"/request",method:"POST",dataType:"json",data:a.requestData}).then(function(e){a.getyewuList(),a.dialogFormVisible=!1,a.$message({message:"编辑成功！",type:"success"}),a.edityewuVisible=!1,a.yewuform={}}).catch(function(e){a.$message.error("请检查您的输入是否有误！")})}).catch(function(e){a.$message.error("请检查您的输入是否有误！")})}).catch(function(e){a.$message.error("请检查您的输入是否有误！")})},deleteTable:function(){var e=this;this.$confirm("此操作将永久删除该数据表, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.requestData={databaseType:u.dbtype,operate:"",sql:"DROP TABLE "+e.tableName},Object(c.a)({url:u.addr+"/request",method:"POST",dataType:"json",data:e.requestData}).then(function(t){e.requestData={databaseType:u.dbtype,operate:"",sql:"delete from metadata_table where metadata_name = '"+e.tableName+"'"},Object(c.a)({url:u.addr+"/request",method:"POST",dataType:"json",data:e.requestData}).then(function(t){e.getyewuList(),e.dialogFormVisible=!1,e.$message({message:"删除成功！",type:"success"}),e.goback()}).catch(function(){e.$message({type:"info",message:"已取消删除"})})})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},stateFormat:function(e,t){return"PRI"==e.COLUMN_KEY?"√":""},stateFormat2:function(e,t){return"YES"==e.IS_NULLABLE?"是":"否"}},created:function(){this.getnowtable(),this.getyewuList(),this.getziduanList()}},f={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticClass:"zuiwaiceng"},[a("el-header",{staticClass:"tou"},[a("div",{staticClass:"page-header"},[a("i",{staticClass:"el-icon-back",staticStyle:{color:"white","margin-right":"20px","margin-top":"18px","margin-left":"20px"},on:{click:function(t){return e.goback()}}}),e._v(" "),a("el-dropdown",{staticStyle:{float:"right"}},[a("span",{staticClass:"el-dropdown-link",staticStyle:{float:"right","font-size":"15px",color:"white","margin-right":"25px","margin-top":"18px"}},[a("i",{staticClass:"el-icon-arrow-down el-icon--left",staticStyle:{float:"right",color:"white","margin-right":"5px","margin-top":"3px"}}),e._v("超级管理员\n                ")]),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{icon:"el-icon-user"}},[e._v("切换账号")]),e._v(" "),a("el-dropdown-item",{attrs:{icon:"el-icon-circle-close"}},[e._v("退出登录")])],1)],1)],1)]),e._v(" "),a("el-main",[a("el-tabs",{attrs:{"tab-position":e.tabPosition},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{staticStyle:{"margin-left":"10px","margin-right":"15px"},attrs:{label:"业务信息",name:"first"}},[a("el-descriptions",{attrs:{title:"业务信息",direction:"vertical",column:4,border:""}},[a("el-descriptions-item",{attrs:{label:"表名",span:3}},[e._v(e._s(e.nowtable.TABLE_NAME))]),e._v(" "),a("el-descriptions-item",{attrs:{label:"中文名称",span:1}},[e._v(e._s(e.yewuList.metadata_cnname)+"\n                    ")]),e._v(" "),a("el-descriptions-item",{attrs:{label:"负责人",span:2}},[e._v(e._s(e.yewuList.metadata_owner))]),e._v(" "),a("el-descriptions-item",{attrs:{label:"类型",span:2}},[a("el-tag",{attrs:{size:"small"}},[e._v(e._s(e.yewuList.metadata_subarea))])],1),e._v(" "),a("el-descriptions-item",{attrs:{label:"描述",span:4}},[e._v(e._s(e.nowtable.TABLE_COMMENT))]),e._v(" "),a("el-descriptions-item",{attrs:{label:"注意事项",span:4}},[e._v(e._s(e.yewuList.metadata_tip))])],1),e._v(" "),a("el-button",{staticStyle:{"margin-top":"20px"},attrs:{type:"primary"},on:{click:function(t){return e.editYewu()}}},[a("i",{staticClass:"el-icon-edit"}),e._v("\n                    编辑")]),e._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:function(t){return e.deleteTable()}}},[a("i",{staticClass:"el-icon-delete"}),e._v(" 删除表")])],1),e._v(" "),a("el-tab-pane",{attrs:{label:"字段信息",name:"second"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.ziduanList,height:"500",border:""}},[a("el-table-column",{attrs:{prop:"COLUMN_NAME",label:"字段名称",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"COLUMN_COMMENT",label:"描述",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"DATA_TYPE",label:"属性"}}),e._v(" "),a("el-table-column",{attrs:{prop:"IS_NULLABLE",formatter:e.stateFormat2,label:"能否为空"}}),e._v(" "),a("el-table-column",{attrs:{prop:"COLUMN_KEY",formatter:e.stateFormat,label:"主键"}}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.editCol(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.deleteCol(t.$index,t.row)}}},[e._v("删除\n                            ")])]}}])})],1),e._v(" "),a("el-button",{staticStyle:{"margin-top":"15px"},attrs:{type:"primary"},on:{click:function(t){return e.addCol()}}},[a("i",{staticClass:"el-icon-plus"}),e._v("新建字段\n                ")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"新建字段",visible:e.addcolVisible},on:{"update:visible":function(t){e.addcolVisible=t}}},[a("el-form",{attrs:{model:e.colform}},[a("el-form-item",{attrs:{label:"字段名称","label-width":e.formLabelWidth,required:""}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.colform.name,callback:function(t){e.$set(e.colform,"name",t)},expression:"colform.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"属性","label-width":e.formLabelWidth,required:""}},[a("el-select",{attrs:{placeholder:"请选择属性"},model:{value:e.colform.type,callback:function(t){e.$set(e.colform,"type",t)},expression:"colform.type"}},[a("el-option",{attrs:{label:"int",value:"int"}}),e._v(" "),a("el-option",{attrs:{label:"float",value:"float"}}),e._v(" "),a("el-option",{attrs:{label:"double",value:"double"}}),e._v(" "),a("el-option",{attrs:{label:"char",value:"char"}}),e._v(" "),a("el-option",{attrs:{label:"varchar",value:"varchar"}}),e._v(" "),a("el-option",{attrs:{label:"date",value:"date"}}),e._v(" "),a("el-option",{attrs:{label:"time",value:"time"}}),e._v(" "),a("el-option",{attrs:{label:"datetime",value:"datetime"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"长度","label-width":e.formLabelWidth,required:""}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"若类型为char或varchar则必填"},model:{value:e.colform.col_length,callback:function(t){e.$set(e.colform,"col_length",t)},expression:"colform.col_length"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"描述","label-width":e.formLabelWidth,required:""}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.colform.description,callback:function(t){e.$set(e.colform,"description",t)},expression:"colform.description"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"选项","label-width":e.formLabelWidth}},[a("el-checkbox",{model:{value:e.pri_checked,callback:function(t){e.pri_checked=t},expression:"pri_checked"}},[e._v("主键")]),e._v(" "),a("el-checkbox",{model:{value:e.isnull_checked,callback:function(t){e.isnull_checked=t},expression:"isnull_checked"}},[e._v("非空")])],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addcolVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addColSubmit()}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"编辑字段",visible:e.editcolVisible},on:{"update:visible":function(t){e.editcolVisible=t}}},[a("el-form",{attrs:{model:e.colform}},[a("el-form-item",{attrs:{label:"字段名称","label-width":e.formLabelWidth,required:""}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.colform.name,callback:function(t){e.$set(e.colform,"name",t)},expression:"colform.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"属性","label-width":e.formLabelWidth,required:""}},[a("el-select",{attrs:{placeholder:"请选择属性"},model:{value:e.colform.type,callback:function(t){e.$set(e.colform,"type",t)},expression:"colform.type"}},[a("el-option",{attrs:{label:"int",value:"int"}}),e._v(" "),a("el-option",{attrs:{label:"float",value:"float"}}),e._v(" "),a("el-option",{attrs:{label:"double",value:"double"}}),e._v(" "),a("el-option",{attrs:{label:"char",value:"char"}}),e._v(" "),a("el-option",{attrs:{label:"varchar",value:"varchar"}}),e._v(" "),a("el-option",{attrs:{label:"date",value:"date"}}),e._v(" "),a("el-option",{attrs:{label:"time",value:"time"}}),e._v(" "),a("el-option",{attrs:{label:"datetime",value:"datetime"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"长度",required:""}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"若类型为char或varchar则必填"},model:{value:e.colform.col_length,callback:function(t){e.$set(e.colform,"col_length",t)},expression:"colform.col_length"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"描述","label-width":e.formLabelWidth,required:""}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.colform.description,callback:function(t){e.$set(e.colform,"description",t)},expression:"colform.description"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"选项","label-width":e.formLabelWidth}},[a("el-checkbox",{model:{value:e.pri_checked,callback:function(t){e.pri_checked=t},expression:"pri_checked"}},[e._v("主键")]),e._v(" "),a("el-checkbox",{model:{value:e.isnull_checked,callback:function(t){e.isnull_checked=t},expression:"isnull_checked"}},[e._v("非空")])],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editcolVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.editColSubmit()}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"编辑信息",visible:e.edityewuVisible},on:{"update:visible":function(t){e.edityewuVisible=t}}},[a("el-form",{attrs:{model:e.yewuform}},[a("el-form-item",{attrs:{label:"数据表名称","label-width":e.formLabelWidth,required:""}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.yewuform.name,callback:function(t){e.$set(e.yewuform,"name",t)},expression:"yewuform.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"中文名称","label-width":e.formLabelWidth,required:""}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.yewuform.cnname,callback:function(t){e.$set(e.yewuform,"cnname",t)},expression:"yewuform.cnname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"分类","label-width":e.formLabelWidth,required:""}},[a("el-select",{attrs:{placeholder:"请选择类型"},model:{value:e.yewuform.type,callback:function(t){e.$set(e.yewuform,"type",t)},expression:"yewuform.type"}},[a("el-option",{attrs:{label:"产品",value:"产品"}}),e._v(" "),a("el-option",{attrs:{label:"网关",value:"网关"}}),e._v(" "),a("el-option",{attrs:{label:"人员",value:"人员"}}),e._v(" "),a("el-option",{attrs:{label:"企业",value:"企业"}}),e._v(" "),a("el-option",{attrs:{label:"其他",value:"其他"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"负责人","label-width":e.formLabelWidth,required:""}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.yewuform.owner,callback:function(t){e.$set(e.yewuform,"owner",t)},expression:"yewuform.owner"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"描述","label-width":e.formLabelWidth,required:""}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.yewuform.description,callback:function(t){e.$set(e.yewuform,"description",t)},expression:"yewuform.description"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"注意事项","label-width":e.formLabelWidth,required:""}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.yewuform.tip,callback:function(t){e.$set(e.yewuform,"tip",t)},expression:"yewuform.tip"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.edityewuVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.editYewuSubmit()}}},[e._v("确 定")])],1)],1)],1)],1)},staticRenderFns:[]};var _=a("VU/8")(p,f,!1,function(e){a("clRs")},null,null).exports;l.default.use(s.a);var v=new s.a({routes:[{path:"/",redirect:"/tablelist"},{path:"/tablelist",component:b},{path:"/global",component:u},{path:"/table",component:_}]}),y=a("zL8q"),w=a.n(y);a("tvR6");l.default.config.productionTip=!1,l.default.use(w.a),new l.default({el:"#app",router:v,components:{App:o},template:"<App/>"})},clRs:function(e,t){},ln9d:function(e,t){},tvR6:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.1d6a9923400ab403e6ab.js.map